<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verb Drill Practice</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            text-align: center;
            padding: 20px;
            background-color: #f0f4f8;
            background-image: url('https://www.transparenttextures.com/patterns/clean-gray-paper.png');
            margin: 0;
            color: #333;
        }
        #container {
            max-width: 450px;
            width: 95%;
            margin: auto;
            padding: 25px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h2 {
            color: #4CAF50;
            font-size: 30px;
            margin-bottom: 25px;
        }
        .question-part {
            margin: 10px 0;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .question-part strong {
            font-weight: bold;
            margin-right: 8px;
        }
        .highlight {
            background-color: #fff3cd; /* Light yellow background for highlighting */
            padding: 5px 10px;
            border-radius: 5px;
        }
        input {
            width: calc(100% - 22px);
            padding: 14px;
            margin-top: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        button {
            width: 100%;
            padding: 14px;
            margin-top: 20px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
        }
        button:hover {
            background-color: #0056b3;
            transform: scale(1.02);
        }
        #feedback {
            margin-top: 25px;
            font-size: 18px;
            font-weight: bold;
        }
        #counter {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
            color: #28a745;
        }
        .tense-checkboxes {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            margin-bottom: 20px;
        }
        .tense-checkboxes label {
            margin: 5px 0;
            font-size: 16px;
        }

        @media (max-width: 600px) {
            h2 {
                font-size: 26px;
            }
            .question-part {
                font-size: 16px;
                flex-direction: column;
                align-items: flex-start;
            }
            .question-part strong {
                margin-bottom: 5px;
            }
            input, button {
                font-size: 14px;
                padding: 12px;
            }
            #feedback, #counter {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div id="container">
        <h2>Verb Drill</h2>
        <div class="tense-checkboxes">
            <label><input type="checkbox" value="Present Simple" checked> Present Simple</label>
            <label><input type="checkbox" value="Present Continuous" checked> Present Continuous</label>
            <label><input type="checkbox" value="Imperative" checked> Imperative</label>
            <label><input type="checkbox" value="Conditional" checked> Conditional</label>
            <label><input type="checkbox" value="Future Simple" checked> Future Simple</label>
            <label><input type="checkbox" value="Past Simple" checked> Past Simple</label>
        </div>
        <div class="question-part">
            <strong><img src="https://img.icons8.com/material-outlined/24/000000/speech-bubble.png" alt="Verb Icon"/> Verb:</strong>
            <span id="verb" class="highlight"></span>
        </div>
        <div class="question-part">
            <strong><img src="https://img.icons8.com/material-outlined/24/000000/user.png" alt="Subject Icon"/> Subject:</strong>
            <span id="subject" class="highlight"></span>
        </div>
        <div class="question-part">
            <strong><img src="https://img.icons8.com/material-outlined/24/000000/clock.png" alt="Tense Icon"/> Tense:</strong>
            <span id="tense" class="highlight"></span>
        </div>
        <input type="text" id="answer" placeholder="Enter the correct form" onkeydown="handleKeyPress(event)">
        <button onclick="checkAnswer()">Submit</button>
        <p id="feedback"></p>
        <p id="counter">Correct Answers: <span id="correctAnswers">0</span></p>
    </div>

    <script>
        const subjects = ["I", "You", "He", "She", "It", "We", "They"];
        const verbs = ["be", "have", "go", "do", "say", "make", "take", "see", "come", "know", "get", "give", "think", "tell", "work", "call", "try", "ask", "need", "feel", "become", "leave", "put", "mean", "keep", "let", "begin", "seem", "help", "talk", "turn", "start", "show", "hear", "play", "run", "move", "like", "live", "believe", "hold", "bring", "happen", "write", "sit", "stand", "lose", "pay", "meet", "include", "continue", "set", "learn", "change", "lead", "understand", "watch", "follow", "analyze", "budget", "collaborate", "delegate", "negotiate", "optimize", "prioritize", "strategize", "facilitate", "implement", "monitor", "coordinate", "evaluate", "generate", "integrate", "review"];
        const tenses = ["Present Simple", "Present Continuous", "Imperative", "Conditional", "Future Simple", "Past Simple"];
        const irregularPast = {
            "be": "was/were", "have": "had", "go": "went", "do": "did", "say": "said", "make": "made", "take": "took", "see": "saw",
            "come": "came", "know": "knew", "get": "got", "give": "gave", "think": "thought", "tell": "told", "leave": "left", "put": "put",
            "mean": "meant", "keep": "kept", "let": "let", "begin": "began", "show": "showed", "hear": "heard", "run": "ran", "sit": "sat",
            "stand": "stood", "lose": "lost", "pay": "paid", "meet": "met", "set": "set", "lead": "led", "write": "wrote", "bring": "brought",
            "hold": "held", "read": "read"
        };

        let currentVerb, currentSubject, currentTense;
        let correctAnswers = 0;
        let selectedTenses = tenses;

        function getRandomElement(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function updateSelectedTenses() {
            const checkboxes = document.querySelectorAll('.tense-checkboxes input[type="checkbox"]');
            selectedTenses = [];
            checkboxes.forEach(checkbox => {
                if (checkbox.checked) {
                    selectedTenses.push(checkbox.value);
                }
            });
            if (selectedTenses.length === 0) {
                alert("Please select at least one tense.");
                newQuestion();
            }
        }

        function newQuestion() {
            updateSelectedTenses();
            currentSubject = getRandomElement(subjects);
            currentVerb = getRandomElement(verbs);
            currentTense = getRandomElement(selectedTenses);
            document.getElementById("verb").innerText = currentVerb;
            document.getElementById("subject").innerText = currentSubject.toLowerCase();
            document.getElementById("tense").innerText = currentTense.toLowerCase();
            document.getElementById("answer").value = "";
            document.getElementById("feedback").innerText = "";
        }

        function conjugateVerb(subject, verb, tense) {
            switch (tense) {
                case "Present Simple":
                    if (verb === "be") return subject === "I" ? "am" : (["He", "She", "It"].includes(subject) ? "is" : "are");
                    if (verb === "have") return ["He", "She", "It"].includes(subject) ? "has" : "have";
                    if (["go", "do"].includes(verb) && ["He", "She", "It"].includes(subject)) return verb === "go" ? "goes" : "does";
                    return ["He", "She", "It"].includes(subject) ? `${verb}s` : verb;
                case "Present Continuous":
                    let ingForm = verb;
                    if (verb.endsWith("e") && !verb.endsWith("ee")) {
                        ingForm = verb.slice(0, -1) + "ing";
                    } else if (verb.endsWith("y") && !["a", "e", "i", "o", "u"].includes(verb[verb.length - 2])) {
                        ingForm = verb.slice(0, -1) + "ying";
                    } else {
                        ingForm = verb + "ing";
                    }
                    return (subject === "I" ? "am" : (["He", "She", "It"].includes(subject) ? "is" : "are")) + " " + ingForm;
                case "Imperative":
                    return verb;
                case "Conditional":
                    return "would " + verb;
                case "Future Simple":
                    return "will " + verb;
                case "Past Simple":
                    if (irregularPast.hasOwnProperty(verb)) return irregularPast[verb];
                    if (verb.endsWith("e")) return verb + "d";
                    if (verb.endsWith("y") && !["a", "e", "i", "o", "u"].includes(verb[verb.length - 2])) return verb.slice(0, -1) + "ied";
                    return verb + "ed";
                default:
                    return verb;
            }
        }

        function checkAnswer() {
            const userAnswer = document.getElementById("answer").value.trim().toLowerCase();
            const correctAnswer = conjugateVerb(currentSubject, currentVerb, currentTense);

            if (userAnswer === correctAnswer) {
                document.getElementById("feedback").innerText = "✅ Correct!";
                correctAnswers++;
                document.getElementById("correctAnswers").innerText = correctAnswers;
                localStorage.setItem('correctAnswers', correctAnswers);
            } else {
                document.getElementById("feedback").innerText = `❌ Incorrect. Correct answer: "${correctAnswer}"`;
            }

            setTimeout(newQuestion, 2000);
        }

        function handleKeyPress(event) {
            if (event.key === "Enter") {
                checkAnswer();
            }
        }

        function loadSavedScore() {
            const savedScore = localStorage.getItem('correctAnswers');
            if (savedScore !== null) {
                correctAnswers = parseInt(savedScore, 10);
                document.getElementById("correctAnswers").innerText = correctAnswers;
            }
        }

        loadSavedScore();
        newQuestion();
    </script>
</body>
</html>
